---
layout: default
title: 开发首页
---
<div class="page-group">
	<div class="page" id="page-index">
		<header class="bar bar-nav">
			<h1 class="title">开发首页</h1>
		</header>
		<div class="content">
			<div class="container">

			    <div class="row">
			       
			        <div id="upload-container" class="col-xs-12 text-center">
			            <input accept="image/*" type="file"/>
			        </div>
			    </div>
			</div>

			<!-- <script src="http://think2011.net/localResizeIMG/dist/lrz.bundle.js?v=7f547f9"></script> -->
			<script src="/assets/js/lrz.bundle.js"></script>
			<script>
				document.querySelector('input').addEventListener('change', function () {
				    var that = this;
				    lrz(that.files[0], {
				        width: 800
				    }).then(function (rst) {
				            var img = new Image(),
				                div = document.createElement('div'),
				                p = document.createElement('p'),
				                sourceSize = toFixed2(that.files[0].size / 1024),
				                resultSize = toFixed2(rst.fileLen / 1024),
				                scale = parseInt(100 - (resultSize / sourceSize * 100));

				            p.style.fontSize = 13 + 'px';
				            p.innerHTML      = '源文件：<span class="text-danger">' +
				                sourceSize + 'KB' +
				                '</span> <br />' +
				                '压缩后传输大小：<span class="text-success">' +
				                resultSize + 'KB (省' + scale + '%)' +
				                '</span> ';

				            div.className = 'col-sm-6';
				            div.appendChild(img);
				            div.appendChild(p);

				            img.onload = function () {
				                document.querySelector('#upload-container').appendChild(div);
				            };

				            img.src = rst.base64;

				            

				            return rst;
				        });
				});
				function toFixed2 (num) {
				    return parseFloat(+num.toFixed(2));
				}
			</script>
		</div>
	</div>
</div>
