/*!
 * =====================================================
 * zanfuwu by yangbinbin - http://m.zanfuwu.com/
 *
 * =====================================================
 */
$(function(){"use strict";__app||(__app={}),__app.loadMoreLink=function(a){var b=this;this.options=a,this.$infinite=$(".infinite-scroll"),this._loadEl=$(".infinite-scroll-preloader"),this.loading=!1,this.loaded=!1,this.container=$(this.options.container)||$(".infinite-scroll-bottom .list-container"),this.page=1,this.data=this.options.data,this.url=this.options.url,this.addItems=function(a){$.ajax({url:this.url,type:"get",data:this.data.replace("{index}",b.page),success:function(c){""==$.trim(c)&&($.detachInfiniteScroll(b.$infinite),b._loadEl.hide()),b.container[a](c),b.page++}})},this.init=function(){$.detachInfiniteScroll(b.$infinite),$.attachInfiniteScroll(b.$infinite),b.addItems("html")},this._remove=function(){$.detachInfiniteScroll(b.$infinite)},this.set=function(a){$.each(a,function(a,c){b[a]=c})},this.reset=function(){b.set({loading:!1,loaded:!1,container:"#renxiaoTab1",url:"/ajax/class-item/index.html",data:"pageNo={index}"})},$(document).on("infinite",".infinite-scroll-bottom",function(){b.loading||(b.loading=!0,setTimeout(function(){b.loading=!1,b.addItems("append"),$.refreshScroller()},1e3))})},__app.tabLoadMore=function(){var a=new __app.loadMoreLink({container:"#pageClassifyItemList",url:"/ajax/class-item/index.html",data:"pageNo={index}"});a.init();var b=$(".mytab-link.active");$(".mytab-link").on("click",function(){return b.removeClass("active"),a.set({page:1,data:$(this).data("params"),url:$(this).data("url"),loading:!1,loaded:!1}),a.init(),b=$(this).addClass("active"),$("html,body,.content").scrollTop(0),!1})},$(document).delegate("[data-link]:not(a)","click",function(a){$(a.target).closest("a").length>0||"A"!=a.target.tagName&&(window.location.href=$(this).data("link"))}),$(document).on("pageInit","#pageStoreDetail,#pageServiceDetail",function(a,b,c){var d=[{url:"//img.alicdn.com/tps/i4/TB1AdxNHVXXXXasXpXX0HY8HXXX-1024-1024.jpeg"}];$(document).on("click",".js-pb-standalone",function(){var a=$(this).attr("data-pb-filed"),b=$(this).data("myPhotoBrowser");b||(b=$.photoBrowser({photos:__app[a]||d,theme:"dark",type:"standalone"}),$(this).data("myPhotoBrowser",b)),b.open()});var e=$("#storeDetailswiper")[0].swiper,f=$(".mytab-link.active");$(".mytab-link").on("click",function(){return e.slideTo(1*$(this).attr("href").substr(4)-1),!1}),e.on("slideChangeStart",function(a,b){f.removeClass("active"),f=$('.mytab-link[href="#tab'+(a.activeIndex+1)+'"]').addClass("active")})}),$(document).on("pageInit","#pagePayResult_1",function(a,b,c){$.modal({title:"支付结果",text:'<div class="content-block"><p><a href="#" class="button button-big button-danger">支付成功</a></p><p><a href="#" class="button button-big button-danger">支付遇到问题</a></p></div>'})}),$(document).on("pageInit","#pagePayResult_3",function(a,b,c){$.pickerModal("#pagePayResult_picker")}),$(document).on("pageInit","#pageClassifyItem",function(a,b,c){$(".buttons-tab").fixedTab({offset:$(".bar-nav").height()}),__app.tabLoadMore}),$.init()});